<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Your Cart - AKC Auto Parts</title>

  <!-- Google Font -->
 <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">


  <style>
    *{
      box-sizing:border-box;
    }
    body{
      font-family:'Nunito Sans';
      background:linear-gradient(135deg,#dfe9f3,#ffffff);
      margin:0; padding:20px;
      animation:fadeIn 0.8s ease-in-out;
    }

    @keyframes fadeIn {
      from{opacity:0;}
      to{opacity:1;}
    }

    .box{
      max-width:900px;
      margin:0 auto;
      background:#fff;
      padding:30px;
      border-radius:20px;
      box-shadow:0 10px 30px rgba(0,0,0,0.1);
      animation:slideUp 0.7s ease;
    }
    @keyframes slideUp {
      from{transform:translateY(30px); opacity:0;}
      to{transform:translateY(0); opacity:1;}
    }

    h2{
      text-align:center;
      margin-bottom:20px;
      font-size:30px;
      font-weight:700;
      color:#111827;
      letter-spacing:1px;
    }

    table{
      width:100%;
      border-collapse:collapse;
      margin-top:15px;
    }

    th{
      padding:14px;
      background:#111827;
      color:#fff;
      text-transform:uppercase;
      font-size:14px;
      border-radius:6px;
    }

    td{
      padding:14px;
      background:#f9fafb;
      border-bottom:10px solid #fff;
      border-radius:10px;
      transition:0.3s;
    }

    tr:hover td{
      background:#eef2ff;
      transform:scale(1.01);
    }

    input[type="number"]{
      width:70px;
      padding:8px;
      border-radius:8px;
      outline:none;
      border:1px solid #ccc;
      transition:0.3s;
      font-size:15px;
    }

    input[type="number"]:focus{
      border-color:#111827;
      transform:scale(1.05);
    }

    .btn{
      background:#111827;
      color:#fff;
      border:none;
      padding:12px 18px;
      border-radius:10px;
      cursor:pointer;
      font-weight:bold;
      font-size:15px;
      transition:0.3s ease;
    }

    .btn:hover{
      background:#4b5563;
      transform:scale(1.05);
    }

    .btn.secondary{
      background:transparent;
      color:#111827;
      border:1.5px solid #111827;
    }

    .btn.secondary:hover{
      background:#111827;
      color:#fff;
    }

    .total-box{
      margin-top:25px;
      font-size:22px;
      font-weight:700;
      text-align:right;
      padding:15px;
      background:#eef2ff;
      border-radius:10px;
      box-shadow:0 4px 10px rgba(0,0,0,0.07);
    }

    .empty-msg{
      text-align:center;
      font-size:18px;
      padding:20px;
      color:#555;
    }

    .btn-float{
      animation:floatBtn 3s ease-in-out infinite;
    }
    @keyframes floatBtn{
      0%,100%{transform:translateY(0);}
      50%{transform:translateY(-6px);}
    }


    /* -------------------------------------------------------- */
    /* SIGN-IN REQUIRED POPUP CSS (ADDED HERE) */
    /* -------------------------------------------------------- */

    .popup-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.45);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      animation: fadeInPopup 0.3s ease;
    }

    .popup-box {
      width: 330px;
      background: #ffffff;
      padding: 25px;
      border-radius: 18px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.15);
      text-align: center;
      animation: popupSlideUp 0.35s ease;
    }

    .popup-box h3 {
      margin: 0 0 10px;
      font-size: 22px;
      font-weight: 700;
      color: #111827;
    }

    .popup-box p {
      font-size: 15px;
      color: #4b5563;
      margin-bottom: 20px;
    }

    .popup-actions {
      display: flex;
      justify-content: space-between;
      gap: 10px;
    }

    .popup-btn {
      flex: 1;
      padding: 12px;
      font-size: 15px;
      font-weight: 600;
      border-radius: 10px;
      cursor: pointer;
      border: none;
      transition: 0.25s ease;
    }

    .popup-btn.signin {
      background: #111827;
      color: white;
    }

    .popup-btn.signin:hover {
      background: #374151;
      transform: scale(1.04);
    }

    .popup-btn.cancel {
      background: #f3f4f6;
      color: #111827;
      border: 1px solid #d1d5db;
    }

    .popup-btn.cancel:hover {
      background: #e5e7eb;
      transform: scale(1.04);
    }

    @keyframes fadeInPopup {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes popupSlideUp {
      from { transform: translateY(30px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

  </style>
</head>

<body>
<header style="max-width:1150px;margin:0 auto 18px;padding:6px 0;display:flex;align-items:center;gap:12px;">
  <img src="https://th.bing.com/th/id/R.35647c0cec927537fa43ed1836a446c2?rik=7Lzu71WwPczowA&riu=http%3a%2f%2fpluspng.com%2fimg-png%2fhyundai-logo-png-hyundai-car-logo-png-brand-image-1749.png&ehk=UI8O%2bS7ci5lpalKI9Rf1u%2bMYvCgw%2bVwAeupMAcxmk2g%3d&risl=&pid=ImgRaw&r=0" alt="AKC" style="height:38px">
  <div style="font-weight:800; font-size:16px;">AKC AUTO PARTS</div>
  <div style="margin-left:auto; color:var(--muted); font-size:14px;">Parts for Hyundai â€¢ Tata â€¢ Bajaj</div>
</header>
<div class="box">

  <table>
    <thead>
      <tr>
        <th>Product</th>
        <th>Qty</th>
        <th>Subtotal</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="cartRows"></tbody>
  </table>

  <div class="total-box">
    Grand Total: â‚¹<span id="grandTotal">0</span>
  </div>

  <div style="margin-top:25px; display:flex; gap:10px; justify-content:center;">
    <button class="btn secondary btn-float" onclick="window.location.href='/'">
      â¬… Continue Shopping
    </button>
    <button class="btn btn-float" onclick="goToRegistration()">
      Checkout â†’
    </button>
  </div>
</div>


<script>
/* ---------------- CART FUNCTIONS ---------------- */
const LS_CART_KEY = 'akc_cart_v1';

function loadCart(){ 
  try{ return JSON.parse(localStorage.getItem(LS_CART_KEY)) || []; }
  catch(e){return []}
}

function saveCart(c){ localStorage.setItem(LS_CART_KEY, JSON.stringify(c)); }

/* ---------------- PRODUCT LIST ---------------- */
const products = [
  { id: "737000B010", manufacturer: "Hyundai", name: "PANEL ASSY-TAIL GATE", category: "Body", price: 12935.28 },
  { id: "8611025100", manufacturer: "Hyundai", name: "GLASS-WINDSHIELD", category: "Glass", price: 7203.5 },
  { id: "2461022600", manufacturer: "Hyundai", name: "ADJUSTER ASSY-ROCKER ARM LASH", category: "Engine", price: 5287.8 },
  { id: "715221A000", manufacturer: "Hyundai", name: "PANEL-REAR SIDE OUTER,RH", category: "Body", price: 4959.24 },
  { id: "287001A200", manufacturer: "Hyundai", name: "PIPE-TAIL W/MUFFLER", category: "Exhaust", price: 4843.02 },
  { id: "8661025000", manufacturer: "Hyundai", name: "COVER ASSY-RR BUMPER", category: "Body", price: 4068.42 },
  { id: "253101A000", manufacturer: "Hyundai", name: "RADIATOR ASSY", category: "Cooling", price: 3452.52 },
  { id: "8661105000", manufacturer: "Hyundai", name: "COVER-RR BUMPER", category: "Body", price: 3285.0 },
  { id: "6640025000", manufacturer: "Hyundai", name: "PANEL ASSY-HOOD", category: "Body", price: 3204.67 },
  { id: "865101A000", manufacturer: "Hyundai", name: "COVER ASSY-FR BUMPER", category: "Body", price: 3051.6 },
  { id: "866110B000", manufacturer: "Hyundai", name: "COVER-RR BUMPER", category: "Body", price: 2601.24 },
  { id: "583051AA00", manufacturer: "Hyundai", name: "SHOE & LINING KIT-RR BRAKE", category: "Brake", price: 2312.0 },
  { id: "2191025010", manufacturer: "Hyundai", name: "BRACKET ASSY-ROLL STOPPER,FR", category: "Suspension", price: 2293.93 },
  { id: "663111A000", manufacturer: "Hyundai", name: "PANEL-FENDER,LH", category: "Body", price: 2061.74 },
  { id: "663211A000", manufacturer: "Hyundai", name: "PANEL-FENDER,RH", category: "Body", price: 2061.74 },
  { id: "2431227000", manufacturer: "Hyundai", name: "BELT-VALVE TIMING", category: "Engine", price: 2045.07 },
  { id: "8651105000", manufacturer: "Hyundai", name: "COVER-FR BUMPER", category: "Body", price: 1973.66 },
  { id: "3517022600", manufacturer: "Hyundai", name: "SENSOR ASSY-THROTTLE POSITION", category: "Engine", price: 1963.47 },
  { id: "8711005541", manufacturer: "Hyundai", name: "GLASS-TAIL GATE", category: "Glass", price: 1946.87 },
  { id: "6450105060", manufacturer: "Hyundai", name: "PANEL ASSY-FNDR APRON,LH", category: "Body", price: 1913.88 },
  { id: "8661105600", manufacturer: "Hyundai", name: "COVER-RR BUMPER", category: "Body", price: 1805.06 },
  { id: "8711005551", manufacturer: "Hyundai", name: "GLASS-TAIL GATE", category: "Glass", price: 1777.89 },
  { id: "9725925100", manufacturer: "Hyundai", name: "SWITCH ASSY-A/C", category: "Electrical", price: 1704.24 },
  { id: "5775525000", manufacturer: "Hyundai", name: "BALL JOINT ASSY,INR", category: "Suspension", price: 1687.92 },
  { id: "8636005600", manufacturer: "Hyundai", name: "GRILLE ASSY-RADIATOR", category: "Body", price: 1564.37 },
  { id: "8772225510CA", manufacturer: "Hyundai", name: "MOULDING ASSY-FRT DR W/LINE,RH", category: "Body", price: 1240.86 },
  { id: "5483017010", manufacturer: "Hyundai", name: "LINK ASSY-FRONT STABILIZER,LH", category: "Suspension", price: 1096.92 },
  { id: "5483017020", manufacturer: "Hyundai", name: "LINK ASSY-FRONT STABILIZER,RH", category: "Suspension", price: 1096.92 },
  { id: "3198143000", manufacturer: "Hyundai", name: "CARTRIDGE & SENSOR ASSY", category: "Engine", price: 976.83 },
  { id: "8772225000CA", manufacturer: "Hyundai", name: "MOULDING ASSY-FRT DR W/LINE,RH", category: "Body", price: 965.73 },
  { id: "865811A000", manufacturer: "Hyundai", name: "BRACKET-FR BPR UPR SUPT", category: "Body", price: 931.77 },
  { id: "5450325A00", manufacturer: "Hyundai", name: "BALL JOINT KIT-SUSP LWR ARM", category: "Suspension", price: 889.58 },
  { id: "5810225A00", manufacturer: "Hyundai", name: "SEAL KIT-FR DISC BRAKE", category: "Brake", price: 844.72 },
  { id: "529601V000", manufacturer: "Hyundai", name: "CAP ASSY-WHEEL HUB", category: "Body", price: 809.98 },
  { id: "876101J700", manufacturer: "Hyundai", name: "MIRROR ASSY-OUTSIDE RR VIEW,LH", category: "Body", price: 809.65 },
  { id: "8773225000CA", manufacturer: "Hyundai", name: "MOULDING ASSY-RR DR W/LINE,RH", category: "Body", price: 794.87 },
  { id: "5583025000", manufacturer: "Hyundai", name: "LINK-STABILIZER BAR", category: "Suspension", price: 783.02 },
  { id: "876101A901CA", manufacturer: "Hyundai", name: "MIRROR ASSY-O/S REAR VIEW,LH", category: "Body", price: 780.94 },
  { id: "597701V000", manufacturer: "Hyundai", name: "CABLE ASSY-PARKING BRAKE,RH", category: "Brake", price: 757.31 },
  { id: "9241025000", manufacturer: "Hyundai", name: "LENS & HSG-REAR COMB LAMP,LH", category: "Electrical", price: 628.53 },
  { id: "863201C000", manufacturer: "Hyundai", name: "EMBLEM-GETZ", category: "Body", price: 595.34 },
  { id: "8632305100", manufacturer: "Hyundai", name: "EMBLEM-1.1 L", category: "Body", price: 584.98 },
  { id: "8773125510CA", manufacturer: "Hyundai", name: "MOULDING ASSY-RR DR W/LINE,LH", category: "Body", price: 560.61 },
  { id: "8636105101", manufacturer: "Hyundai", name: "GRILLE-RADIATOR", category: "Body", price: 521.28 },
  { id: "838301R000", manufacturer: "Hyundai", name: "MOULDING ASSY-RR DR DELTA,LH", category: "Body", price: 514.69 },
  { id: "838401R000", manufacturer: "Hyundai", name: "MOULDING ASSY-RR DR DELTA,RH", category: "Body", price: 514.69 },
  { id: "8761125100", manufacturer: "Hyundai", name: "MIRROR & HOLDER ASSY-O/S RR VI", category: "Body", price: 511.35 },
  { id: "8762125400", manufacturer: "Hyundai", name: "MIRROR & HOLDER-OUTSIDE RR,RH", category: "Body", price: 511.35 },
  { id: "8240305510", manufacturer: "Hyundai", name: "REGULATOR ASSY-FR DR P/WDO LH", category: "Electrical", price: 510.23 },
  { id: "9241002200", manufacturer: "Hyundai", name: "SWITCH ASSY-FR FOG LAMP", category: "Electrical", price: 509.07 },
  { id: "5531122000", manufacturer: "Hyundai", name: "INSULATOR-STRUT", category: "Suspension", price: 501.17 },
  { id: "8612128A00", manufacturer: "Hyundai", name: "DAM-GLASS", category: "Glass", price: 457.45 },
  { id: "5481325000", manufacturer: "Hyundai", name: "BUSH-STABILIZER BAR", category: "Suspension", price: 448.3 },
  { id: "8641036010", manufacturer: "Hyundai", name: "BUMPER-HOOD OVERSLAM", category: "Body", price: 430.95 },
  { id: "6951005500", manufacturer: "Hyundai", name: "DOOR ASSY-FUEL FILLER", category: "Fuel", price: 424.72 },
  { id: "817201J020", manufacturer: "Hyundai", name: "HANDLE ASSY-TAIL GATE", category: "Body", price: 422.27 },
  { id: "565550X500", manufacturer: "Hyundai", name: "RACK BUSH", category: "Suspension", price: 408.64 },
  { id: "8340305510", manufacturer: "Hyundai", name: "REGULATOR ASSY-RR DR P/WDO LH", category: "Electrical", price: 360.44 },
  { id: "815114A000", manufacturer: "Hyundai", name: "BUMPER-F/FILLER DR O/SLAM", category: "Body", price: 339.04 },
  { id: "5461202000", manufacturer: "Hyundai", name: "BEARING-STRUT", category: "Suspension", price: 325.53 },
  { id: "876210P970", manufacturer: "Hyundai", name: "MIRROR & HOLDER-OUTSIDE RR,RH", category: "Body", price: 323.16 },
  { id: "876110B000", manufacturer: "Hyundai", name: "MIRROR & HOLDER ASSY-O/S RR VI", category: "Body", price: 320.51 },
  { id: "876210B000", manufacturer: "Hyundai", name: "MIRROR & HOLDER-OUTSIDE RR,RH", category: "Body", price: 320.51 },
  { id: "5830105A00", manufacturer: "Hyundai", name: "CYLINDER KIT-RR WHEEL BRAKE", category: "Brake", price: 316.9 },
  { id: "865821A000", manufacturer: "Hyundai", name: "BRACKET-FR BPR LWR SUPT", category: "Body", price: 310.59 },
  { id: "8683102000", manufacturer: "Hyundai", name: "GUARD ASSY-FRONT WHEEL MUD,LH", category: "Body", price: 309.7 },
  { id: "8683202000", manufacturer: "Hyundai", name: "GUARD ASSY-FRONT WHEEL MUD,RH", category: "Body", price: 309.7 },
  { id: "3341202000", manufacturer: "Hyundai", name: "RELIEF DIAPH", category: "Engine", price: 304.92 },
  { id: "5723122000", manufacturer: "Hyundai", name: "BELT\"V\"-POWER STEERING PUMP", category: "Engine", price: 300.54 },
  { id: "865841A000", manufacturer: "Hyundai", name: "BRACKET-FR BPR CORNER SUPT,LH", category: "Body", price: 299.04 },
  { id: "865851A000", manufacturer: "Hyundai", name: "BRACKET-FR BPR CORNER SUPT,RH", category: "Body", price: 299.04 },
  { id: "529601C300", manufacturer: "Hyundai", name: "CAP ASSY-WHEEL HUB", category: "Body", price: 298.45 },
  { id: "988201C000", manufacturer: "Hyundai", name: "BLADE ASSY-WIPER,RR", category: "Wiper", price: 284.86 },
  { id: "8265025000CA", manufacturer: "Hyundai", name: "HANDLE ASSY-FRONT DOOR OUTSIDE", category: "Body", price: 265.65 },
  { id: "8266025000CA", manufacturer: "Hyundai", name: "HANDLE ASSY-FRONT DOOR OUTSIDE", category: "Body", price: 265.65 },
  { id: "9882105000", manufacturer: "Hyundai", name: "BLADE-W/SHLD WIPER", category: "Wiper", price: 254.1 },
  { id: "254121E300", manufacturer: "Hyundai", name: "HOSE-RADIATOR LOWER", category: "Cooling", price: 232.85 },
  { id: "8365025000CA", manufacturer: "Hyundai", name: "HANDLE ASSY-REAR DOOR OUTSIDE", category: "Body", price: 232.45 },
  { id: "8366025000CA", manufacturer: "Hyundai", name: "HANDLE ASSY-REAR DOOR OUTSIDE", category: "Body", price: 232.45 },
  { id: "9183038000", manufacturer: "Hyundai", name: "LP-S/B FUSE 30A", category: "Electrical", price: 230.65 },
  { id: "2915025000", manufacturer: "Hyundai", name: "COVER-UNDER", category: "Body", price: 196.18 },
  { id: "5810202A00", manufacturer: "Hyundai", name: "SEAL KIT-FR DISC BRAKE", category: "Brake", price: 183.99 },
  { id: "8651605000", manufacturer: "Hyundai", name: "MESH-FRONT BUMPER,LH", category: "Body", price: 183.85 },
  { id: "815900X900", manufacturer: "Hyundai", name: "CATCH & CABLE ASSY-FUEL FILLER", category: "Fuel", price: 182.16 },
  { id: "923300B010", manufacturer: "Hyundai", name: "LENS & HOUSING ASSY-S/RPTR", category: "Electrical", price: 177.04 },
  { id: "5296022800", manufacturer: "Hyundai", name: "CAP ASSY-WHEEL HUB", category: "Body", price: 163.64 },
  { id: "868111A000", manufacturer: "Hyundai", name: "GUARD ASSY-FRONT WHEEL,LH", category: "Body", price: 161.82 },
  { id: "868121A000", manufacturer: "Hyundai", name: "GUARD ASSY-FRONT WHEEL,RH", category: "Body", price: 161.82 },
  { id: "8651505000", manufacturer: "Hyundai", name: "BRACKET-FR BUMPER SIDE UPR,RH", category: "Body", price: 150.78 },
  { id: "8651705000", manufacturer: "Hyundai", name: "MESH-FRONT BUMPER,RH", category: "Body", price: 147.08 },
  { id: "8644002001", manufacturer: "Hyundai", name: "W/STRIP-HOOD", category: "Body", price: 120.81 },
  { id: "8636205100", manufacturer: "Hyundai", name: "MESH-RADIATOR GRILLE", category: "Body", price: 112.88 },
  { id: "8263022001LM", manufacturer: "Hyundai", name: "HANDLE ASSY-DOOR WINDOW REGULA", category: "Interior", price: 106.23 },
  { id: "8659334000", manufacturer: "Hyundai", name: "GROMMET-SCREW", category: "Body", price: 99.9 },
  { id: "865831A000", manufacturer: "Hyundai", name: "BRACKET-FR BPR CTR SUPT", category: "Body", price: 99.85 },
  { id: "865241V000", manufacturer: "Hyundai", name: "COVER-BLANKING FRT FOG,RH", category: "Body", price: 86.2 },
  { id: "8684205500", manufacturer: "Hyundai", name: "GUARD ASSY-REAR WHEEL MUD,RH", category: "Body", price: 71.94 },
  { id: "711170U000", manufacturer: "Hyundai", name: "BRACKET ASSY-FENDER MTG,LH", category: "Body", price: 64.85 },
  { id: "711270U000", manufacturer: "Hyundai", name: "BRACKET ASSY-FENDER MTG,RH", category: "Body", price: 64.85 },
  { id: "8766025010", manufacturer: "Hyundai", name: "COVER-FR DR QUADRANT INR LH", category: "Body", price: 60.7 },
  { id: "9863025900", manufacturer: "Hyundai", name: "NOZZLE ASSY-WINDSHIELD WASHER", category: "Wiper", price: 58.38 },
  { id: "8939114001IJ", manufacturer: "Hyundai", name: "KNOB-LATCH ROD", category: "Interior", price: 57.68 },
  { id: "8661505600", manufacturer: "Hyundai", name: "BRACKET-RR BUMPER SIDE,LH", category: "Body", price: 55.26 },
  { id: "8661605600", manufacturer: "Hyundai", name: "BRACKET-RR BUMPER SIDE,RH", category: "Body", price: 55.26 },
  { id: "8683225000", manufacturer: "Hyundai", name: "GUARD ASSY-FRONT WHEEL MUD,RH", category: "Body", price: 51.94 },
  { id: "8135533000", manufacturer: "Hyundai", name: "SHIM-DR STRIKER", category: "Interior", price: 38.06 },
  { id: "9835205000", manufacturer: "Hyundai", name: "CAP-W/WPR ARM", category: "Wiper", price: 35.97 },
  { id: "1893720252", manufacturer: "Hyundai", name: "FUSE-AUTO 20(A)", category: "Electrical", price: 29.58 },


  // TATA
  { id: "TA200", manufacturer: "Tata", name: "Diesel Engine", category: "Engine", price: 8000 },
  { id: "TA201", manufacturer: "Tata", name: "Heavy Brake Shoe", category: "Brake", price: 2600 },
  { id: "TA202", manufacturer: "Tata", name: "Hydraulic Pump", category: "Engine", price: 7000 },
  { id: "TA203", manufacturer: "Tata", name: "Axle Shaft", category: "Body", price: 5400 },
  { id: "TA204", manufacturer: "Tata", name: "Gearbox", category: "Engine", price: 9000 },
  { id: "TA205", manufacturer: "Tata", name: "Turbocharger", category: "Engine", price: 9500 },
  { id: "TA206", manufacturer: "Tata", name: "Fuel Injector", category: "Engine", price: 4800 },
  { id: "TA207", manufacturer: "Tata", name: "Transmission Assembly", category: "Engine", price: 15000 },
  { id: "TA208", manufacturer: "Tata", name: "Leaf Spring", category: "Suspension", price: 4200 },
  { id: "TA209", manufacturer: "Tata", name: "Wheel Hub", category: "Body", price: 3100 },
  { id: "TA210", manufacturer: "Tata", name: "Radiator Tank", category: "Engine", price: 6000 },
  { id: "TA211", manufacturer: "Tata", name: "AC Blower", category: "Electrical", price: 2800 },
  { id: "TA212", manufacturer: "Tata", name: "Diesel Filter", category: "Engine", price: 1300 },
  { id: "TA213", manufacturer: "Tata", name: "Heavy Tyre", category: "Body", price: 5500 },
  { id: "TA214", manufacturer: "Tata", name: "Clutch Booster", category: "Engine", price: 4300 },
  { id: "TA215", manufacturer: "Tata", name: "Propeller Shaft", category: "Engine", price: 7200 },
  { id: "TA216", manufacturer: "Tata", name: "Starter Motor", category: "Electrical", price: 3900 },
  { id: "TA217", manufacturer: "Tata", name: "Alternator Heavy", category: "Electrical", price: 5800 },
  { id: "TA218", manufacturer: "Tata", name: "Steering Column", category: "Body", price: 3600 },
  { id: "TA219", manufacturer: "Tata", name: "Air Drum", category: "Body", price: 2700 },

  // BAJAJ
  { id: "BJ300", manufacturer: "Bajaj", name: "Bike Engine", category: "Engine", price: 6000 },
  { id: "BJ301", manufacturer: "Bajaj", name: "Front Brake", category: "Brake", price: 900 },
  { id: "BJ302", manufacturer: "Bajaj", name: "Rear Brake", category: "Brake", price: 850 },
  { id: "BJ303", manufacturer: "Bajaj", name: "Silencer", category: "Body", price: 2000 },
  { id: "BJ304", manufacturer: "Bajaj", name: "Bike Chain", category: "Body", price: 1200 },
  { id: "BJ305", manufacturer: "Bajaj", name: "Carburetor", category: "Engine", price: 1800 },
  { id: "BJ306", manufacturer: "Bajaj", name: "Fuel Tank", category: "Body", price: 2500 },
  { id: "BJ307", manufacturer: "Bajaj", name: "Headlamp", category: "Electrical", price: 950 },
  { id: "BJ308", manufacturer: "Bajaj", name: "Backlight", category: "Electrical", price: 650 },
  { id: "BJ309", manufacturer: "Bajaj", name: "Shock Absorber", category: "Suspension", price: 1900 },
  { id: "BJ310", manufacturer: "Bajaj", name: "Meter Console", category: "Electrical", price: 2100 },
  { id: "BJ311", manufacturer: "Bajaj", name: "Battery", category: "Electrical", price: 2200 },
  { id: "BJ312", manufacturer: "Bajaj", name: "Air Filter", category: "Engine", price: 450 },
  { id: "BJ313", manufacturer: "Bajaj", name: "Clutch Wire", category: "Engine", price: 300 },
  { id: "BJ314", manufacturer: "Bajaj", name: "Throttle Body", category: "Engine", price: 2600 },
  { id: "BJ315", manufacturer: "Bajaj", name: "Piston Kit", category: "Engine", price: 2800 },
  { id: "BJ316", manufacturer: "Bajaj", name: "Brake Lever", category: "Brake", price: 450 },
  { id: "BJ317", manufacturer: "Bajaj", name: "Indicator Light", category: "Electrical", price: 220 },
  { id: "BJ318", manufacturer: "Bajaj", name: "Alloy Wheel", category: "Body", price: 3200 },
  { id: "BJ319", manufacturer: "Bajaj", name: "Bike Seat", category: "Body", price: 1500 },
];


/* ---------------- GET PRODUCT INFO ---------------- */
function getProduct(id){
  return products.find(p=>p.id===id) || null;
}

/* ---------------- RENDER CART ---------------- */
function renderCart(){
  const cart = loadCart();
  const tbody = document.getElementById('cartRows');
  const totalEl = document.getElementById('grandTotal');

  tbody.innerHTML = '';
  
  if(cart.length === 0){
    tbody.innerHTML = `<tr><td colspan="4" class="empty-msg">Your cart is empty ðŸ›’</td></tr>`;
    totalEl.textContent = "0";
    return;
  }

  let total = 0;

  cart.forEach(item=>{
    const p = getProduct(item.id);
    if(!p) return;

    const subtotal = p.price * item.qty;
    total += subtotal;

    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td><strong>${p.name}</strong><br><small style="color:#555">${p.id}</small></td>
      <td>
        <input type="number" min="1" value="${item.qty}" onchange="changeQty('${item.id}', this.value)">
      </td>
      <td><strong>â‚¹${subtotal.toLocaleString()}</strong></td>
      <td><button class="btn secondary" onclick="removeItem('${item.id}')">Remove</button></td>
    `;
    tbody.appendChild(tr);
  });

  totalEl.textContent = total.toLocaleString();
}

function changeQty(id, value){
  let cart = loadCart();
  let item = cart.find(i=>i.id===id);
  if(item){
    item.qty = Math.max(1, Number(value));
    saveCart(cart);
    renderCart();
  }
}

function removeItem(id){
  let cart = loadCart();
  cart = cart.filter(i=>i.id !== id);
  saveCart(cart);
  renderCart();
}

/* ---------------- CHECKOUT PROTECTION ---------------- */
function goToRegistration() {
  const isLoggedIn = "<%= session && session.user ? 'true' : 'false' %>";

  if (isLoggedIn !== "true") {
    document.getElementById("signinPopup").style.display = "flex";
    return;
  }

  window.location.href = "/registration";
}

function closePopup() {
  document.getElementById("signinPopup").style.display = "none";
}

function goToSignin() {
  window.location.href = "/signin";
}

document.addEventListener('DOMContentLoaded', renderCart);
</script>

<!-- ---------------- SIGN-IN POPUP HTML ---------------- -->
<div id="signinPopup" class="popup-overlay">
  <div class="popup-box">
    <h3>Sign in Required</h3>
    <p>You need to sign in before checking out.</p>

    <div class="popup-actions">
      <button class="popup-btn signin" onclick="goToSignin()">Sign In</button>
      <button class="popup-btn cancel" onclick="closePopup()">Cancel</button>
    </div>
  </div>
</div>

</body>
</html>
